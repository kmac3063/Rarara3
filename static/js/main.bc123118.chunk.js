(this["webpackJsonpmini-app"]=this["webpackJsonpmini-app"]||[]).push([[0],{129:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c(19),s=c.n(r),i=c(12),a=c.n(i),d=c(18),j=c.n(d),l=c(22),o=c(13),u=c(5),b=(c(127),c(130)),h=c(4),O=function(e){var t=e.id,c=(e.go,e.fetchedUser,e.callFriend);return Object(h.jsxs)(u.i,{id:t,children:[Object(h.jsx)(u.j,{children:"\u0412\u044b\u0431\u0438\u0440\u0430\u0439 \u0434\u0440\u0443\u0433\u0430"}),Object(h.jsx)(u.e,{onClick:c,before:Object(h.jsx)(b.a,{}),children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u0430"})]})},f=(c.p,c(131)),x=function(e){var t,c=e.id,n=e.fetchedUser,r=e.go;return Object(h.jsx)(u.i,{id:c,children:Object(h.jsx)(u.g,{children:Object(h.jsx)(u.l,{icon:Object(h.jsx)(f.a,{}),header:"\u041f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u043c, "+(t=n,(null==t||null==t.first_name?"\u041f\u0440\u0438\u044f\u0442\u0435\u043b\u044c":n.first_name)+"!"),action:Object(h.jsx)(u.d,{size:"m",onClick:r,"data-to":"Home",children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u0441\u043f\u0438\u0441\u043a\u0443 \u0434\u0440\u0443\u0437\u0435\u0439"}),children:"\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043e \u0432 \u0440\u0430\u043c\u043a\u0430\u0445 \u0444\u0438\u043d\u0430\u043b\u0430 \u0445\u0430\u043a\u0430\u0442\u043e\u043d\u0430."})})})},m=c(132),p=function(e){var t=e.id,c=e.go,r=(e.fetchedUser,e.friend),s=e.meShacking,i=e.coord,a=e.speed,d=Object(n.useState)(!1),j=Object(o.a)(d,2),l=j[0],b=j[1],O=Object(n.useState)(!0),f=Object(o.a)(O,2),x=f[0];f[1];return Object(n.useEffect)((function(){var e=setInterval((function(){b((function(){return Math.random()<=.5}),500)}),500);return function(){console.log("unmount"),clearTimeout(e)}}),[]),Object(h.jsxs)(u.i,{id:t,children:[Object(h.jsx)(u.j,{left:Object(h.jsx)(u.k,{onClick:c,"data-to":"Home"}),children:"\u0422\u0435\u0442-\u0430-\u0442\u0435\u0442"}),Object(h.jsxs)(u.e,{children:["x: ",i.x]}),Object(h.jsxs)(u.e,{children:["y: ",i.y]}),Object(h.jsxs)(u.e,{children:["z: ",i.z]}),Object(h.jsxs)(u.e,{children:["speed: ",a]}),Object(h.jsx)(u.g,{header:Object(h.jsx)(u.h,{mode:"secondary",children:"\u0412\u044b"}),children:Object(h.jsxs)(u.f,{style:{display:"flex"},children:[Object(h.jsx)(u.d,{size:"l",stretched:!0,mode:"commerce",style:{marginRight:8},children:"\u0412\u044b \u0432 \u0442\u0435\u0442-\u0430-\u0442\u0435\u0442"}),s?Object(h.jsx)(u.d,{size:"l",stretched:!0,mode:"commerce",children:"\u0412\u044b \u0442\u0440\u044f\u0441\u0435\u0442\u0435"}):Object(h.jsx)(u.d,{size:"l",stretched:!0,mode:"secondary",children:"\u0412\u044b \u043d\u0435 \u0442\u0440\u044f\u0441\u0435\u0442\u0435"})]})}),Object(h.jsx)(u.g,{header:Object(h.jsx)(u.h,{mode:"secondary",children:r.first_name+" "+r.last_name}),children:Object(h.jsxs)(u.f,{style:{display:"flex"},children:[x?Object(h.jsx)(u.d,{size:"l",stretched:!0,mode:"commerce",style:{marginRight:8},children:"\u0412 \u0442\u0435\u0442-\u0430-\u0442\u0435\u0442"}):Object(h.jsx)(u.d,{size:"l",stretched:!0,mode:"secondary",style:{marginRight:8},children:"\u041d\u0435 \u0432 \u0442\u0435\u0442-\u0430-\u0442\u0435\u0442"}),l?Object(h.jsx)(u.d,{size:"l",stretched:!0,mode:"commerce",children:"\u0422\u0440\u044f\u0441\u0435\u0442"}):Object(h.jsx)(u.d,{size:"l",stretched:!0,mode:"secondary",children:"\u041d\u0435 \u0442\u0440\u044f\u0441\u0435\u0442"})]})}),Object(h.jsx)(u.n,{}),s&&x&&l?Object(h.jsxs)(u.f,{style:{margin:0,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",textAlign:"center",padding:32},children:[Object(h.jsx)(u.c,{children:Object(h.jsx)(m.a,{})}),Object(h.jsx)(u.e,{children:"\u0412\u044b \u0442\u0440\u044f\u0441\u0435\u0442\u0435 \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e"}),Object(h.jsx)(u.c,{children:Object(h.jsx)(m.a,{})})]}):null]})},g=function(){arguments.length>0&&void 0!==arguments[0]||allowedList;return function(){var e=Object(n.useState)("WelcomeScreen"),t=Object(o.a)(e,2),c=t[0],r=t[1],s=Object(n.useState)(null),i=Object(o.a)(s,2),d=i[0],b=i[1],f=Object(n.useState)(Object(h.jsx)(u.m,{size:"large"})),m=Object(o.a)(f,2),g=m[0],y=m[1],v=Object(n.useState)(null),S=Object(o.a)(v,2),z=(S[0],S[1]),A=Object(n.useState)(null),k=Object(o.a)(A,2),U=k[0],_=k[1],w=Object(n.useState)(null),W=Object(o.a)(w,2),C=W[0],I=W[1],K=Object(n.useState)(0),V=Object(o.a)(K,2),F=V[0],E=V[1],H=Object(n.useState)({x:0,y:0,z:0}),M=Object(o.a)(H,2),R=M[0],T=M[1];Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(null),e.next=3,a.a.send("VKWebAppGetUserInfo");case 3:t=e.sent,a.a.send("VKWebAppAccelerometerStart",{refresh_rate:100}),b(t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a.a.subscribe((function(e){var t=e.detail,c=t.type,n=t.data;if("VKWebAppUpdateConfig"===c){var r=document.createAttribute("scheme");r.value="client_light",z(r.value),document.body.attributes.setNamedItem(r)}if("VKWebAppAccelerometerChanged"===c){var s=n.x,i=n.y,a=n.z,d=R.x,j=R.y,l=R.Z,o=Math.sqrt(d*d+j*j+l*l),u=Math.sqrt(s*s+i*i+a*a);I((function(){return u-o>12})),E((function(){return u})),T((function(){return{x:s,y:i,z:a}}))}}));var t=null;return function(){e.apply(this,arguments)}(),function(){null!==t&&clearTimeout(t)}}),[]);var q=function(e){r(e.currentTarget.dataset.to)},G=function(){var e=Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.a.send("VKWebAppGetFriends",{}).then((function(e){_((function(){return e.users[0]}))})),t={id:2884043,first_name:"Albert",last_name:"Usmanov",sex:2,photo_200:"..."},_((function(){return t}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){null!==U&&r((function(){return"Friend"}))}),[U]),Object(h.jsx)(u.a,{children:Object(h.jsx)(u.b,{children:Object(h.jsxs)(u.o,{activePanel:c,popout:g,children:[Object(h.jsx)(x,{id:"WelcomeScreen",fetchedUser:d,go:q}),Object(h.jsx)(O,{id:"Home",fetchedUser:d,go:q,callFriend:G}),Object(h.jsx)(p,{id:"Friend",fetchedUser:d,go:q,friend:U,meShacking:C,coord:R,speed:F})]})})})}()};a.a.send("VKWebAppInit"),s.a.render(Object(h.jsx)(g,{}),document.getElementById("root"))}},[[129,1,2]]]);
//# sourceMappingURL=main.bc123118.chunk.js.map